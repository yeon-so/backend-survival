# 12-1. CQRS

> ### 학습 키워드
>
> * [CQS](12-1.-cqrs.md#cqs-command-query-separation)
> * [CQRS](12-1.-cqrs.md#cqrs)
> * [SSOT(Single Source Of Truth)](12-1.-cqrs.md#ssot-single-source-of-truth)
> * [Materialized View](12-1.-cqrs.md#materialized-view)
> * [OLTP(Online Transaction Processing)](12-1.-cqrs.md#oltp-online-transaction-processing)
> * OLAP(Online Analytical Processing)
> * Event Sourcing

***

## CQS(Command Query Separation)

* 어떠한 객체의 메서드는 Command와 Query를 명확하게 분리해서 사용해야 한다는 원칙을 말한다.
* Command와 Quary
  * Command(modifiers) : 시스템의 상태를 변경(side effect)하는 대신 값을 반환하지 않는다.
  * Quary : 시스템 값을 반환하나 상태를 변경하지 않는다.
* Command와 Quary가 동시에 일어나지 않기 때문에 성능을 최적화 할 수 있지만 Command와 Quary를 동시에 해야 하는 상황에서는 코드가 복잡해질 수 있다.

## CQRS(Command Query Responsibility Segregation)

* CQRS는 CQS원리를 기반으로, CQS는 명령과 조회를 연산 수준에서 분리하는 반면 CQRS는 개체(object)나 시스템(혹은 하위 시스템) 수준에서 분리한다.
* _<mark style="color:purple;">이어서 계속...</mark>_

## SSOT(Single Source Of Truth)

* 정보 시스템 설계 및 이론 중 하나로 데이터와 스키마 및모든 데이터 요소를 한 곳에서만 제어 또는 편집하도록 조직하는 관례를 말한다.
* 단일 출처를 통해 데이터를 생성, 편집, 접근하므로 데이터의 정합성을 지키고 잘못된 데이터 유통을 방지하며 모두가 동일한 데이터를 참조하게 하여 여러 복사본에 존재하는 대신 기능에 필요한 정보의 위치를 알려준다.

## Materialized View

* 구체화된 뷰는 쿼리의 결과를 담고 있는 데이터베이스 오브젝트로 일반 View와 다르게 물리적으로 저장되고, 주기적으로 동기화가 이뤄진다.
* 이는 원거리에 위치한 데이터의 근거리 사본일 수도 있고, 테이블의 줄이나 열의 Join 결과일 수도 있으며 테이블 요약일 수도 있다. 또한 원거리 테이블에 기반한 데이터를 저장하는 구체화 뷰는 스냅샷으로도 부른다.&#x20;
* 복잡한 인프라 구성 없이 CQRS를 도입하고 싶을 때 유용하다.

***

## OLTP(Online Transaction Processing)

## OLAP(Online Analytical Processing)

## Event Sourcing
